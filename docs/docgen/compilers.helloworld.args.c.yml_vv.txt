$ buildtest build -c compilers.helloworld.args.c.yml -vv
________________________________________________________________________________
testtype: singlesource
description: "C program that prints arguments passed to executable."
scheduler: local


program:
  compiler: gnu
  source: args.c
  env:
    FOO: BAR
    X: 1
  pre_build: gcc --version
  cflags: -Wall -g
  post_build: gcc -v
  pre_run: echo $SRCDIR $TESTDIR
  exec_opts: hello world!
  post_run: echo post_run

maintainer:
- shahzeb siddiqui shahzebmsiddiqui@gmail.com
________________________________________________________________________________
Loading Test Configuration (YAML) file: /u/users/ssi29/gpfs/buildtest-framework/toolkit/suite/compilers/helloworld/args.c.yml
Checking schema of YAML file
Schema Check Passed
Scheduler: local
Parent Directory: /u/users/ssi29/gpfs/buildtest-framework/toolkit/suite/compilers/helloworld
Source Directory: /u/users/ssi29/gpfs/buildtest-framework/toolkit/suite/compilers/helloworld/src
Source File: /u/users/ssi29/gpfs/buildtest-framework/toolkit/suite/compilers/helloworld/src/args.c
Detecting Programming Language, Compiler and MPI wrapper
Programming Language: c
CC: gcc
CFLAGS: -Wall -g
{
    "testpath": "/tmp/ssi29/buildtest/tests/Intel/Haswell/x86_64/rhel/7.6/build_2/args.c.yml.0x29034b86.sh",
    "scheduler": [],
    "module": [
        "module purge",
        "module load GCCcore/8.3.0",
        "module load bzip2/1.0.8-GCCcore-8.3.0",
        "module load zlib/1.2.11-GCCcore-8.3.0",
        "module load ncurses/6.1-GCCcore-8.3.0",
        "module load libreadline/8.0-GCCcore-8.3.0",
        "module load Tcl/8.6.9-GCCcore-8.3.0",
        "module load SQLite/3.29.0-GCCcore-8.3.0",
        "module load XZ/5.2.4-GCCcore-8.3.0",
        "module load GMP/6.1.2-GCCcore-8.3.0",
        "module load libffi/3.2.1-GCCcore-8.3.0",
        "module load Python/3.7.4-GCCcore-8.3.0",
        "module load PyCharm/2017.2.3"
    ],
    "metavars": [
        "TESTDIR=/tmp/ssi29/buildtest/tests/Intel/Haswell/x86_64/rhel/7.6/build_2",
        "SRCDIR=/u/users/ssi29/gpfs/buildtest-framework/toolkit/suite/compilers/helloworld/src",
        "SRCFILE=/u/users/ssi29/gpfs/buildtest-framework/toolkit/suite/compilers/helloworld/src/args.c",
        "CC=gcc",
        "CFLAGS=\"-Wall -g\"",
        "EXECUTABLE=args.c.yml.0x185b2109.exe"
    ],
    "envs": [
        "export FOO=BAR",
        "export X=1"
    ],
    "build": [
        "cd $TESTDIR",
        "gcc --version",
        "$CC $CFLAGS -o $EXECUTABLE $SRCFILE",
        "gcc -v"
    ],
    "run": [
        "echo $SRCDIR $TESTDIR",
        "$EXECUTABLE hello world!",
        "echo post_run",
        "rm ./$EXECUTABLE"
    ]
}None
Writing Test: /tmp/ssi29/buildtest/tests/Intel/Haswell/x86_64/rhel/7.6/build_2/args.c.yml.0x29034b86.sh
Changing permission to 755 for test: /tmp/ssi29/buildtest/tests/Intel/Haswell/x86_64/rhel/7.6/build_2/args.c.yml.0x29034b86.sh
________________________________________________________________________________
module purge
module load GCCcore/8.3.0
module load bzip2/1.0.8-GCCcore-8.3.0
module load zlib/1.2.11-GCCcore-8.3.0
module load ncurses/6.1-GCCcore-8.3.0
module load libreadline/8.0-GCCcore-8.3.0
module load Tcl/8.6.9-GCCcore-8.3.0
module load SQLite/3.29.0-GCCcore-8.3.0
module load XZ/5.2.4-GCCcore-8.3.0
module load GMP/6.1.2-GCCcore-8.3.0
module load libffi/3.2.1-GCCcore-8.3.0
module load Python/3.7.4-GCCcore-8.3.0
module load PyCharm/2017.2.3
TESTDIR=/tmp/ssi29/buildtest/tests/Intel/Haswell/x86_64/rhel/7.6/build_2
SRCDIR=/u/users/ssi29/gpfs/buildtest-framework/toolkit/suite/compilers/helloworld/src
SRCFILE=/u/users/ssi29/gpfs/buildtest-framework/toolkit/suite/compilers/helloworld/src/args.c
CC=gcc
CFLAGS="-Wall -g"
EXECUTABLE=args.c.yml.0x185b2109.exe
export FOO=BAR
export X=1
cd $TESTDIR
gcc --version
$CC $CFLAGS -o $EXECUTABLE $SRCFILE
gcc -v
echo $SRCDIR $TESTDIR
$EXECUTABLE hello world!
echo post_run
rm ./$EXECUTABLE
________________________________________________________________________________
Writing Log file to:  /tmp/ssi29/buildtest/tests/Intel/Haswell/x86_64/rhel/7.6/build_2/log/buildtest_10_01_22_11_2019.log
